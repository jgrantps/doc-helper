<!-- passed to "users/dashboard/main_display" via yielded "content_for :user_sidebar" block in view files-->
<!-- passes a further partial if current_user.admin? == false -->



<div class="mt-2"> 

    <!-- Counts ALL USERS!!! -->
          <a 
          href="/users"
          class="flex justify-between item-center px-3 py-1 text-sm font-medium text-gray-900 rounded-lg hover:bg-gray-200"
          >
            <span>All</span>
            <% if current_user.admin?%>
              <span class="text-xs font-semibold text-gray-700"><%= all_users.count %></span>
            <% else %>
              <span class="text-xs font-semibold text-gray-700"><%=current_user.all_associated_users.uniq.count %></span>
            <% end %>
          </a>

    <!-- lower level tally of Associated Users sorted By roles. -->
        <% current_user.class.roles.keys.each do |role| %>
          <%= render partial: 'users/dashboard/user_list', locals: {:role => role}  %>
        <% end %>
        </div>